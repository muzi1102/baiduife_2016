<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<style type="text/css" media="screen">
		.box{
			width: 430px;
			height: 430px;
			border:1px solid #000;
			margin: 10px auto;
			position: relative;
		}
		*{
			margin:0;
			padding: 0;
			/* box-sizing: border-box; */
		}
		.item{
		    width: 42px;
		    height: 42px;
		    border-bottom: 1px solid rgb(237 ,237 ,237);
		    border-right: 1px solid rgb(237 ,237 ,237);
		    float: left;
		}
		.actionItem{
			width: 43px;
			height: 43px;
			background-color: red;
			position: absolute;
		}
		span{
			width: 43px;
			height: 10px;
			background-color: blue;
			position: absolute;
			top: 0;
		}
		p{
			margin-left: 450px;
		}
	</style>
</head>
<body>
	<div class="box">
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="item"></div>
		<div class="actionItem"><span></span></div>
	</div>
	<p><input type="text" class="order"><button>GO</button></p>
</body>
<script type="text/javascript">
	window.onload=function(){
		var actionItem=document.querySelector('.actionItem');
		var order=document.querySelector('.order');
		var btn=document.querySelector('button');
		function moveObject(obj,position) {
			this.i=0;
			this.obj=obj;
			this.position=position;
			this.rotate=0;
		}
		moveObject.prototype={
			init:function(){
				var L=this.position.left*43;
				var T=this.position.top*43;
				this.obj.style.left=L+'px';
				this.obj.style.top=T+'px';
				
			},
			// 改变小块的位置
			go:function(rotate){
				if (this.canMove()) {
					switch (rotate) {
						case 0:
							this.position.top-=1
							this.init()
							break;
						case 90:
						case -270:
							this.position.left+=1;
							this.init()
							break;
						case 180:
						case -180:
							this.position.top+=1;
							this.init()
							break;
						case 270:
						case -90:
							this.position.left-=1;
							this.init();
							break;
						default:
							break;
					}
				}
			},
			// 向左转（逆时针旋转90度）
			TunLef:function(){
				if (this.i>=3) {
					this.i=-1
				}
				++this.i;
				var deg=this.i*(-90);
				this.rotate=deg;
				this.obj.style.transform='rotate('+(deg)+'deg)';
			},
			TunRig:function(){
				if (this.i>=3) {
					this.i=-1
				}
				++this.i;
				var deg=this.i*(90);
				this.rotate=deg;
				this.obj.style.transform='rotate('+deg+'deg)';
			},
			TunBac:function(){
				var deg=this.i*(180)
				if (this.i>=3) {
					this.i=-1
				}
				++this.i;
				this.obj.style.transform='rotate('+deg+'deg)';
			},
			canMove:function(){
				if ((this.position.left==0&&this.rotate==-90)||
					(this.position.top==0&&this.rotate==0)||
					(this.position.left==9&&this.rotate==-270)||
					(this.position.top==9&&this.rotate==-180)||
					(this.position.left==0&&this.rotate==270)||
					(this.position.top==9&&this.rotate==180)||
					(this.position.left==9&&this.rotate==90)) {
					return false;
				}else{
					return true;
				}
			}
		};
		// 初始化
		var move=new moveObject(actionItem,{left:4,top:4})
		move.init();
		btn.onclick=function(){
			var val=order.value;
			instruction(val);
		}
		function instruction(ins) {
			switch (ins) {
				case 'TUN LEF':
					move.TunLef()
					break;
				case 'TUN RIG':
					move.TunRig();
					break
				case 'TUN BAC':
					move.TunBac();
					break;
				case 'GO':
					move.go(move.rotate);
					break;
				default:
					break;
			}
		}

	}
</script>
</html>